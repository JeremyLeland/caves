<!-- <link rel="stylesheet" href="styles.css"> -->
<style>
  .actor {
    position: absolute;
    width: 64px;
    height: 64px;
    overflow: hidden;
  }

  .direction {
    position: relative;
  }

  .layer {
    position: absolute;
    object-position: inherit;
  }

  .north { top:    0px }
  .west  { top:  -64px }
  .south { top: -128px }
  .east  { top: -192px }

  .walk { animation: walk 1s steps( 8 ) infinite; }
  @keyframes walk {
    from { object-position:  -64px -512px; }
    to   { object-position: -576px -512px; }
  }

  .slash { animation: slash 1s steps( 5 ) 1; }
  @keyframes slash {
    from { object-position:  -64px -768px; }
    to   { object-position: -384px -768px; }
  }

  .die { animation: die 1s steps( 4 ) 1 forwards; }
  @keyframes die {
    from { object-position:  -64px -1280px; }
    to   { object-position: -320px -1280px; }
  }
</style>

<!-- TODO: Reset the class after slash animation completes (with an event?)-->

<div class="actor" style="transform: translate(32px, 32px);">
  <div id="dir" class="direction south">
    <div id="anim" class="walk">
      <img class="layer" src="../images/sprites/humanoid/male/shadow.png" />
      <img class="layer" src="../images/sprites/humanoid/male/skeleton.png" />
      <img class="layer" src="../images/sprites/humanoid/male/axe.png" />
    </div>
  </div>
</div>

<script type="module">
  import { GUI } from '../lib/dat.gui.module.js';

  const dirDiv = document.getElementById( 'dir' );
  const animDiv = document.getElementById( 'anim' );

  const obj = {
    "dirs": {
      'north': function() { dirDiv.className = 'direction north' },
      'west':  function() { dirDiv.className = 'direction west'  },
      'south': function() { dirDiv.className = 'direction south' },
      'east':  function() { dirDiv.className = 'direction east'  },
    },
    "anims": {
      'walk':  function() { animDiv.className = 'walk'  },
      'slash': function() { animDiv.className = 'slash' },
      'die':   function() { animDiv.className = 'die'   },
    }
  }
  
  const gui = new GUI( { width: 100 } );
  for ( let cat in obj ) {
    const folder = gui.addFolder( cat );
    for ( let name in obj[ cat ] ) {
      folder.add( obj[ cat ], name );
    }
    folder.open();
  }
</script>