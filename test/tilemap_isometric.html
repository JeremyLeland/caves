<link rel="stylesheet" href="../styles.css">
<script type="module">
  const tileMap = [
    [ 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0],
    [ 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0],
    [ 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0],
    [ 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0],
    [ 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0],
    [ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [ 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0],
    [ 0, 0, 0, 1, 0, 0, 0, 1, 2, 1, 0, 0],
    [ 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0],
    [ 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [ 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [ 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0],
  ];

  
  const TILE_WIDTH = 64, TILE_HEIGHT = 32;

  const cols = tileMap.length, rows = tileMap[0].length;

  const canvas = document.createElement('canvas');
  canvas.width = rows * TILE_WIDTH;
  canvas.height = cols * TILE_HEIGHT;
  document.body.appendChild(canvas);

  const ctx = canvas.getContext('2d');

  const colors = [ 'green', 'blue', 'gray' ];

  for (let row = 0; row < rows; row ++) {
    for (let col = 0; col < cols; col ++) {
      const colorIndex = tileMap[col][row];
      drawIsoTile(ctx, col, row, cols, rows, colors[colorIndex]);
    }
  }
  
  function drawIsoTile(ctx, col, row, cols, rows, color) {
    const x = (row + col) * TILE_WIDTH / 2;
    const y = (rows - col + row - 1) * TILE_HEIGHT / 2;
    
    ctx.beginPath();
    ctx.moveTo(x                 , y + TILE_HEIGHT / 2);
    ctx.lineTo(x + TILE_WIDTH / 2, y                  );
    ctx.lineTo(x + TILE_WIDTH    , y + TILE_HEIGHT / 2);
    ctx.lineTo(x + TILE_WIDTH / 2, y + TILE_HEIGHT    );
    ctx.closePath();

    ctx.fillStyle = color;
    ctx.strokeStyle = 'gray';
    ctx.fill();
    ctx.stroke();
  }

</script>