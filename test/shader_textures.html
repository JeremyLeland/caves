<link rel="stylesheet" href="../styles.css">
<script type="module">
  import * as THREE from 'https://unpkg.com/three/build/three.module.js';
  
  const scene = new THREE.Scene();
  scene.background = new THREE.Color( 0x222255 );

  const geometry = new THREE.BoxBufferGeometry();
  
  const material = new THREE.ShaderMaterial({
    // uniforms: {
    //   tiles:  { value: tiles },
    //   blends: { value: blends },
    // },
    vertexShader: `
      out vec2 v_uv;
      void main() {
        v_uv = uv ;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    `,
    fragmentShader: `
      in vec2 v_uv;

      out vec4 outColor;

      void main() {
      
        outColor = vec4( v_uv.x, v_uv.y, 0.0, 1.0 );
      }
    `,
    glslVersion: THREE.GLSL3,
  });

  const mesh = new THREE.Mesh( geometry, material );
  scene.add( mesh );

  const light = new THREE.DirectionalLight( 0xffffff );
  light.position.set( 0, 1.0, 0.5 );
  light.target.position.set( 0, 0, 0 );
  scene.add( light );

  const camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 0.1, 1000 );
  camera.position.set( 0, 0, 2 );
  camera.lookAt( 0, 0, 0 );

  const renderer = new THREE.WebGLRenderer();
  document.body.appendChild( renderer.domElement );

  window.onresize = () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();

    renderer.setSize( window.innerWidth, window.innerHeight );
  }
  window.onresize();

  render();

  function render() {
    requestAnimationFrame( render );

    mesh.rotation.x += 0.005;
    mesh.rotation.y += 0.005;

    renderer.render( scene, camera );
  }

</script>