<canvas id="canvas"></canvas>
<div id="ui">
  Action: <select id="actions"></select><br>
  Dir: <select id="dirs"></select>
</div>
    
<script type="module">
  import { Images } from '../src/Images.js';
  import { Sprite, Direction } from '../src/Sprite.js';
  import { Actor } from '../src/Actor.js';
  import { GameCanvas, Keyboard, Mouse } from '../src/GameCanvas.js';
  
  const actions = ['cast', 'thrust', 'walk', 'slash', 'shoot', 'hurt'];
  const actor = new Actor({centerX: 31, centerY: 60,
    sprites: await Sprite.loadSprites(
      ['body', 'chest', 'pants', 'hair', 'hat',  'belt', 'shoes'].map(e => `human/male/${e}`),
      actions
    )
  });
  actor.spawn(31, 60);

  const actionSelect = document.getElementById('actions');
  const dirSelect = document.getElementById('dirs');

  actionSelect.onchange = () => actor.action = actionSelect.value;
  dirSelect.onchange = () => actor.direction = Direction[dirSelect.value];

  fillSelectFromArray(actionSelect, actions);
  fillSelectFromArray(dirSelect, Object.keys(Direction));

  actionSelect.onchange();
  dirSelect.onchange();

  const gameCanvas = new GameCanvas(document.getElementById('canvas'), {fullscreen: false});

  gameCanvas.update = (dt) => actor.update(dt);
  gameCanvas.draw = (ctx) =>  actor.draw(ctx);

  function fillSelectFromArray(select, array) {
    array.forEach(item => {
      const option = document.createElement('option');
      option.innerText = item;
      select.appendChild(option);
    });
    select.value = array[0];
  }
  
</script>
