<!DOCTYPE HTML>
<html>
  <head>
    <title>Tile Maps</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <link rel="stylesheet" href="../styles.css">
  </head>
  <body>
    <canvas id="canvas" width="320px" height="320px" style="float: left"></canvas>
    
    <script type="module">
      import { TileSet, TileMap } from '../src/TileMap.js';
      
      const tilesetJson = [
        { src: '../images/terrain/dirt.png',  color: 'brown' },
        { src: '../images/terrain/grass.png', color: 'green' },
        { src: '../images/terrain/sand.png',  color: 'white' }
      ];

      const mapCols = 10, mapRows = 10;
      const mapArray = [
        [ 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0],
        [ 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0],
        [ 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0],
        [ 0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0],
        [ 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0],
        [ 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [ 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0],
        [ 0, 0, 0, 1, 0, 0, 1, 2, 1, 0, 0],
        [ 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0],
        [ 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [ 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0],
      ];

      const tileSet = new TileSet(tilesetJson);
      tileSet.ready.then(() => {
        const tileMap = new TileMap(mapCols, mapRows, tileSet);
        tileMap.setTilesFromArray(mapArray);

        const ctx = document.getElementById('canvas').getContext('2d');
        tileMap.draw(ctx);
      });
      
    </script>
  </body>
</html>
