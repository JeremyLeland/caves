<link rel="stylesheet" href="../styles.css">
<div id="ui"></div>
    
<script type="module">
  import { Animation, Direction, Actor } from '../build/Actor.js';
  import { GameCanvas, Keyboard, Mouse } from '../build/GameCanvas.js';
  
  const imagePaths = [
    'body', 'chest', 'pants', 'hair', 'hat',  'belt', 'shoes', 'dagger'
  ].map( e => `../images/sprites/humanoid/male/${e}.png` );
  const images = await Actor.loadImages( imagePaths );

  const actor = new Actor( images );
  actor.spawnAtPoint( 32, 64 );

  const ui = document.getElementById( 'ui' );
  [ Animation.Idle, Animation.Walk, Animation.Attack, Animation.Die ].forEach( animation => {
    const button = document.createElement( 'button' );
    button.innerText = Animation[ animation ];
    button.onclick = () => actor.startAnimation( animation );
    ui.appendChild( button );
  } );

  const mouse = new Mouse();
  const gameCanvas = new GameCanvas( 90, 90 );
  document.body.appendChild( gameCanvas.getCanvas() );

  gameCanvas.update = ( dt ) => {
    actor.aimTowardPoint( mouse.x, mouse.y );
    actor.update( dt );
  }
  gameCanvas.draw = ( ctx ) => {
    ctx.clearRect( 0, 0, 90, 90 );
    actor.draw( ctx );
  }
  
</script>
